var databaseUrl = "localhost/db";
var collections = ["messages"]
var db = require("./mongojs").connect(databaseUrl, collections);
//var crypto = require('crypto');

exports.saveMessage = function(message,response) {  
	console.log('Saving message to mongo');
	db.messages.save({"message":message}, function(err, saved) {
  	if( err || !saved ) {
		console.log("Message not saved");
		response.write("Message not saved");
		response.end();
	}
  	else {
		console.log("Message saved and sent successfully!!");
		response.write("Message saved and sent successfully!!");
		response.end();
	}
});
}

/*exports.displayMessages = function displayMessages(message,response) {
 if(message.lenth==0){
	var messages = db.messages.find({"messages":message}, function(err, messages) {
	
	if(err)  {
  		response.write(err);
  	response.end();
 	 }
  	else{
    		response.write(messages);
 		response.end();
	}
  });
 
} */

/*exports.displayMessage = function displayMessage(message,response) {

	
	message = new Buffer('secret');
	var aes = crypto.createCipher('aes-256-cbc', message);
  console.log("Message Sent :"+message);
  response.write("Hello !! Your  message: "+message+",has been sent without saving");
} */




